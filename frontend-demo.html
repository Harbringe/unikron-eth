<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEX API Frontend Demo</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }

        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        h1,
        h2 {
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 14px;
        }

        input,
        select {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.9);
            font-size: 16px;
            box-sizing: border-box;
        }

        .fee-slippage-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .control-group {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .control-group h3 {
            margin-top: 0;
            color: #ffd700;
        }

        .range-display {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            text-align: center;
            font-weight: bold;
        }

        button {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            width: 100%;
            margin: 10px 0;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        button:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }

        .result {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 14px;
            max-height: 400px;
            overflow-y: auto;
        }

        .status {
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            text-align: center;
            font-weight: bold;
        }

        .status.success {
            background: rgba(46, 204, 113, 0.3);
            border: 1px solid #2ecc71;
        }

        .status.error {
            background: rgba(231, 76, 60, 0.3);
            border: 1px solid #e74c3c;
        }

        .status.info {
            background: rgba(52, 152, 219, 0.3);
            border: 1px solid #3498db;
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: background 0.3s;
            border: none;
            color: white;
            background: transparent;
        }

        .tab.active {
            background: rgba(255, 255, 255, 0.2);
            font-weight: bold;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .info-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #ffd700;
        }

        .info-box h4 {
            margin-top: 0;
            color: #ffd700;
        }
    </style>
</head>

<body>
    <h1>üöÄ DEX API Frontend Demo</h1>

    <div class="container">
        <div class="info-box">
            <h4>üìä Current Configuration</h4>
            <p><strong>Fee:</strong> <span id="currentFee">Loading...</span></p>
            <p><strong>Slippage:</strong> <span id="currentSlippage">Loading...</span></p>
            <p><strong>Network:</strong> <span id="currentNetwork">Loading...</span></p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('swap')">üí± Swap</button>
            <button class="tab" onclick="showTab('secure-mev')">üõ°Ô∏è Secure MEV</button>
            <button class="tab" onclick="showTab('settings')">‚öôÔ∏è Settings</button>
            <button class="tab" onclick="showTab('quotes')">üìà Quotes</button>
        </div>

        <!-- Swap Tab -->
        <div id="swap" class="tab-content active">
            <h2>üí± Execute Swap</h2>

            <div class="form-group">
                <label for="tokenIn">Token In (Address):</label>
                <input type="text" id="tokenIn" value="0xeF0feba656d4e871ecD9Ca329d06D2C2e25D05dC"
                    placeholder="Token In Address">
            </div>

            <div class="form-group">
                <label for="tokenOut">Token Out (Address):</label>
                <input type="text" id="tokenOut" value="0xfa03892d49037c5e988De9092e329Ee2573C8D07"
                    placeholder="Token Out Address">
            </div>

            <div class="form-group">
                <label for="amount">Amount In:</label>
                <input type="text" id="amount" value="1000000" placeholder="Amount in smallest units">
            </div>

            <div class="form-group">
                <label for="minAmountOut">Minimum Amount Out:</label>
                <input type="text" id="minAmountOut" value="900000" placeholder="Minimum amount out">
            </div>

            <div class="fee-slippage-controls">
                <div class="control-group">
                    <h3>üí∞ Fixed Fee</h3>
                    <div class="range-display">
                        <span>10 bps (0.10%) - Fixed</span>
                    </div>
                    <p style="text-align: center; margin-top: 10px; font-size: 12px; opacity: 0.8;">
                        Fee is fixed at 0.1% and cannot be changed
                    </p>
                </div>

                <div class="control-group">
                    <h3>üìâ Slippage Control</h3>
                    <label for="slippageBps">Slippage (basis points):</label>
                    <input type="range" id="slippageBps" min="5" max="500" value="50" step="1">
                    <div class="range-display">
                        <span id="slippageDisplay">50 bps (0.50%)</span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="swapType">Swap Type:</label>
                <select id="swapType">
                    <option value="regular">Regular Swap (No MEV Protection)</option>
                    <option value="mev">MEV-Protected Swap</option>
                </select>
            </div>

            <button onclick="executeSwap()">üöÄ Execute Swap</button>

            <div id="swapResult" class="result" style="display: none;"></div>
        </div>

        <!-- Secure MEV Tab -->
        <div id="secure-mev" class="tab-content">
            <h2>üõ°Ô∏è Secure MEV Protection</h2>

            <div class="info-box">
                <h4>üîí How Secure MEV Works</h4>
                <p><strong>Phase 1 (Commit):</strong> Create commitment hash with NO swap details exposed</p>
                <p><strong>Phase 2 (Reveal):</strong> Execute swap after commitment is confirmed</p>
                <p><strong>Security:</strong> Front-runners cannot see your swap intent!</p>
            </div>

            <div class="form-group">
                <label for="mevTokenIn">Token In (Address):</label>
                <input type="text" id="mevTokenIn" value="0xeF0feba656d4e871ecD9Ca329d06D2C2e25D05dC"
                    placeholder="Token In Address">
            </div>

            <div class="form-group">
                <label for="mevTokenOut">Token Out (Address):</label>
                <input type="text" id="mevTokenOut" value="0xfa03892d49037c5e988De9092e329Ee2573C8D07"
                    placeholder="Token Out Address">
            </div>

            <div class="form-group">
                <label for="mevAmount">Amount In:</label>
                <input type="text" id="mevAmount" value="1000000" placeholder="Amount in smallest units">
            </div>

            <div class="form-group">
                <label for="mevMinAmountOut">Minimum Amount Out:</label>
                <input type="text" id="mevMinAmountOut" value="900000" placeholder="Minimum amount out">
            </div>

            <div class="fee-slippage-controls">
                <div class="control-group">
                    <h3>üí∞ Fixed Fee</h3>
                    <div class="range-display">
                        <span>10 bps (0.10%) - Fixed</span>
                    </div>
                    <p style="text-align: center; margin-top: 10px; font-size: 12px; opacity: 0.8;">
                        Fee is fixed at 0.1% and cannot be changed
                    </p>
                </div>

                <div class="control-group">
                    <h3>üìâ Slippage Control</h3>
                    <label for="mevSlippageBps">Slippage (basis points):</label>
                    <input type="range" id="mevSlippageBps" min="5" max="500" value="50" step="1">
                    <div class="range-display">
                        <span id="mevSlippageDisplay">50 bps (0.50%)</span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="userAddress">Your Wallet Address:</label>
                <input type="text" id="userAddress" value="0x30Ad0c3a89D374a3C2580A97F083990bedaF5845"
                    placeholder="Your wallet address">
            </div>

            <div class="form-group">
                <label for="userNonce">Transaction Nonce:</label>
                <input type="text" id="userNonce" value="0" placeholder="Your current nonce">
            </div>

            <button onclick="createSecureCommitment()">üîí Phase 1: Create Commitment</button>
            <button onclick="revealAndExecute()">üöÄ Phase 2: Reveal & Execute</button>

            <div id="mevCommitResult" class="result" style="display: none;"></div>
            <div id="mevRevealResult" class="result" style="display: none;"></div>
        </div>

        <!-- Settings Tab -->
        <div id="settings" class="tab-content">
            <h2>‚öôÔ∏è Contract Settings</h2>

            <div class="control-group">
                <h3>üí∞ Set Default Fee</h3>
                <label for="setFeeBps">New Fee (basis points):</label>
                <input type="range" id="setFeeBps" min="5" max="500" value="5" step="1">
                <div class="range-display">
                    <span id="setFeeDisplay">5 bps (0.05%)</span>
                </div>
                <button onclick="setDefaultFee()">üíæ Set Default Fee</button>
            </div>

            <div class="control-group">
                <h3>üìâ Set Default Slippage</h3>
                <label for="setSlippageBps">New Slippage (basis points):</label>
                <input type="range" id="setSlippageBps" min="5" max="500" value="50" step="1">
                <div class="range-display">
                    <span id="setSlippageDisplay">50 bps (0.50%)</span>
                </div>
                <button onclick="setDefaultSlippage()">üíæ Set Default Slippage</button>
            </div>

            <div id="settingsResult" class="result" style="display: none;"></div>
        </div>

        <!-- Quotes Tab -->
        <div id="quotes" class="tab-content">
            <h2>üìà Get Quotes</h2>

            <div class="form-group">
                <label for="quoteTokenIn">Token In (Address):</label>
                <input type="text" id="quoteTokenIn" value="0xeF0feba656d4e871ecD9Ca329d06D2C2e25D05dC"
                    placeholder="Token In Address">
            </div>

            <div class="form-group">
                <label for="quoteTokenOut">Token Out (Address):</label>
                <input type="text" id="quoteTokenOut" value="0xfa03892d49037c5e988De9092e329Ee2573C8D07"
                    placeholder="Token Out Address">
            </div>

            <div class="form-group">
                <label for="quoteAmount">Amount In:</label>
                <input type="text" id="quoteAmount" value="1000000" placeholder="Amount in smallest units">
            </div>

            <button onclick="getQuotes()">üìä Get All Quotes</button>
            <button onclick="getBestQuote()">üèÜ Get Best Quote</button>
            <button onclick="compareDexs()">üîç Compare DEXs</button>

            <div id="quotesResult" class="result" style="display: none;"></div>
        </div>
    </div>

    <div id="status" class="status" style="display: none;"></div>

    <script>
        const API_BASE = 'http://localhost:3001';

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function () {
            loadCurrentSettings();
            setupRangeDisplays();
        });

        function setupRangeDisplays() {
            // Fee range display
            const feeRange = document.getElementById('feeBps');
            const feeDisplay = document.getElementById('feeDisplay');
            feeRange.addEventListener('input', function () {
                const value = this.value;
                feeDisplay.textContent = `${value} bps (${(value / 100).toFixed(2)}%)`;
            });

            // Slippage range display
            const slippageRange = document.getElementById('slippageBps');
            const slippageDisplay = document.getElementById('slippageDisplay');
            slippageRange.addEventListener('input', function () {
                const value = this.value;
                slippageDisplay.textContent = `${value} bps (${(value / 100).toFixed(2)}%)`;
            });

            // Set fee range display
            const setFeeRange = document.getElementById('setFeeBps');
            const setFeeDisplay = document.getElementById('setFeeDisplay');
            setFeeRange.addEventListener('input', function () {
                const value = this.value;
                setFeeDisplay.textContent = `${value} bps (${(value / 100).toFixed(2)}%)`;
            });

            // Set slippage range display
            const setSlippageRange = document.getElementById('setSlippageBps');
            const setSlippageDisplay = document.getElementById('setSlippageDisplay');
            setSlippageRange.addEventListener('input', function () {
                const value = this.value;
                setSlippageDisplay.textContent = `${value} bps (${(value / 100).toFixed(2)}%)`;
            });
        }

        function showTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));

            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));

            // Show selected tab content
            document.getElementById(tabName).classList.add('active');

            // Add active class to selected tab
            event.target.classList.add('active');
        }

        async function loadCurrentSettings() {
            try {
                const response = await fetch(`${API_BASE}/contract-info`);
                const data = await response.json();

                document.getElementById('currentFee').textContent = `${data.defaults.feeBps} bps (${(data.defaults.feeBps / 100).toFixed(2)}%)`;
                document.getElementById('currentSlippage').textContent = `${data.defaults.slippageBps} bps (${(data.defaults.slippageBps / 100).toFixed(2)}%)`;
                document.getElementById('currentNetwork').textContent = data.network;

                // Update range inputs to match current values
                document.getElementById('feeBps').value = data.defaults.feeBps;
                document.getElementById('slippageBps').value = data.defaults.slippageBps;
                document.getElementById('setFeeBps').value = data.defaults.feeBps;
                document.getElementById('setSlippageBps').value = data.defaults.slippageBps;

                // Update displays
                document.getElementById('feeDisplay').textContent = `${data.defaults.feeBps} bps (${(data.defaults.feeBps / 100).toFixed(2)}%)`;
                document.getElementById('slippageDisplay').textContent = `${data.defaults.slippageBps} bps (${(data.defaults.slippageBps / 100).toFixed(2)}%)`;
                document.getElementById('setFeeDisplay').textContent = `${data.defaults.feeBps} bps (${(data.defaults.feeBps / 100).toFixed(2)}%)`;
                document.getElementById('setSlippageDisplay').textContent = `${data.defaults.slippageBps} bps (${(data.defaults.slippageBps / 100).toFixed(2)}%)`;

            } catch (error) {
                showStatus('Error loading current settings: ' + error.message, 'error');
            }
        }

        async function executeSwap() {
            const swapType = document.getElementById('swapType').value;
            const tokenIn = document.getElementById('tokenIn').value;
            const tokenOut = document.getElementById('tokenOut').value;
            const amount = document.getElementById('amount').value;
            const minAmountOut = document.getElementById('minAmountOut').value;
            const slippageBps = parseInt(document.getElementById('slippageBps').value);

            // Fixed fee of 0.1% (10 bps)
            const FIXED_FEE_BPS = 10;

            const options = {
                enableMEV: swapType === 'mev',
                slippageBps: slippageBps
            };

            const swapData = {
                tokenIn,
                tokenOut,
                amount,
                minAmountOut,
                options
            };

            try {
                showStatus('Executing swap...', 'info');

                const response = await fetch(`${API_BASE}/dex/swap`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(swapData)
                });

                const result = await response.json();

                if (response.ok) {
                    document.getElementById('swapResult').style.display = 'block';
                    document.getElementById('swapResult').textContent = JSON.stringify(result, null, 2);
                    showStatus('Swap executed successfully!', 'success');
                } else {
                    showStatus('Swap failed: ' + result.error, 'error');
                }

            } catch (error) {
                showStatus('Error executing swap: ' + error.message, 'error');
            }
        }

        async function setDefaultFee() {
            const feeBps = parseInt(document.getElementById('setFeeBps').value);

            try {
                showStatus('Setting default fee...', 'info');

                const response = await fetch(`${API_BASE}/parameters/set-fee`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ feeBps })
                });

                const result = await response.json();

                if (response.ok) {
                    document.getElementById('settingsResult').style.display = 'block';
                    document.getElementById('settingsResult').textContent = JSON.stringify(result, null, 2);
                    showStatus('Default fee updated successfully!', 'success');
                    loadCurrentSettings(); // Reload current settings
                } else {
                    showStatus('Failed to update fee: ' + result.error, 'error');
                }

            } catch (error) {
                showStatus('Error updating fee: ' + error.message, 'error');
            }
        }

        async function setDefaultSlippage() {
            const slippageBps = parseInt(document.getElementById('setSlippageBps').value);

            try {
                showStatus('Setting default slippage...', 'info');

                const response = await fetch(`${API_BASE}/parameters/set-slippage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ slippageBps })
                });

                const result = await response.json();

                if (response.ok) {
                    document.getElementById('settingsResult').style.display = 'block';
                    document.getElementById('settingsResult').textContent = JSON.stringify(result, null, 2);
                    showStatus('Default slippage updated successfully!', 'success');
                    loadCurrentSettings(); // Reload current settings
                } else {
                    showStatus('Failed to update slippage: ' + result.error, 'error');
                }

            } catch (error) {
                showStatus('Error updating slippage: ' + error.message, 'error');
            }
        }

        async function getQuotes() {
            const tokenIn = document.getElementById('quoteTokenIn').value;
            const tokenOut = document.getElementById('quoteTokenOut').value;
            const amount = document.getElementById('quoteAmount').value;

            try {
                showStatus('Getting quotes...', 'info');

                const response = await fetch(`${API_BASE}/dex/quote?tokenIn=${tokenIn}&tokenOut=${tokenOut}&amount=${amount}`);
                const result = await response.json();

                if (response.ok) {
                    document.getElementById('quotesResult').style.display = 'block';
                    document.getElementById('quotesResult').textContent = JSON.stringify(result, null, 2);
                    showStatus('Quotes retrieved successfully!', 'success');
                } else {
                    showStatus('Failed to get quotes: ' + result.error, 'error');
                }

            } catch (error) {
                showStatus('Error getting quotes: ' + error.message, 'error');
            }
        }

        async function getBestQuote() {
            const tokenIn = document.getElementById('quoteTokenIn').value;
            const tokenOut = document.getElementById('quoteTokenOut').value;
            const amount = document.getElementById('quoteAmount').value;

            try {
                showStatus('Getting best quote...', 'info');

                const response = await fetch(`${API_BASE}/dex/best-quote?tokenIn=${tokenIn}&tokenOut=${tokenOut}&amount=${amount}`);
                const result = await response.json();

                if (response.ok) {
                    document.getElementById('quotesResult').style.display = 'block';
                    document.getElementById('quotesResult').textContent = JSON.stringify(result, null, 2);
                    showStatus('Best quote retrieved successfully!', 'success');
                } else {
                    showStatus('Failed to get best quote: ' + result.error, 'error');
                }

            } catch (error) {
                showStatus('Error getting best quote: ' + error.message, 'error');
            }
        }

        async function compareDexs() {
            const tokenIn = document.getElementById('quoteTokenIn').value;
            const tokenOut = document.getElementById('quoteTokenOut').value;
            const amount = document.getElementById('quoteAmount').value;

            try {
                showStatus('Comparing DEXs...', 'info');

                const response = await fetch(`${API_BASE}/dex/compare?tokenIn=${tokenIn}&tokenOut=${tokenOut}&amount=${amount}`);
                const result = await response.json();

                if (response.ok) {
                    document.getElementById('quotesResult').style.display = 'block';
                    document.getElementById('quotesResult').textContent = JSON.stringify(result, null, 2);
                    showStatus('DEX comparison completed successfully!', 'success');
                } else {
                    showStatus('Failed to compare DEXs: ' + result.error, 'error');
                }

            } catch (error) {
                showStatus('Error comparing DEXs: ' + error.message, 'error');
            }
        }

        function showStatus(message, type) {
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = message;
            statusDiv.className = `status ${type}`;
            statusDiv.style.display = 'block';

            // Auto-hide after 5 seconds
            setTimeout(() => {
                statusDiv.style.display = 'none';
            }, 5000);
        }

        // Secure MEV Functions
        let currentCommitment = null;
        let currentPrivateSalt = null;

        async function createSecureCommitment() {
            const userAddress = document.getElementById('userAddress').value;
            const tokenIn = document.getElementById('mevTokenIn').value;
            const tokenOut = document.getElementById('mevTokenOut').value;
            const amount = document.getElementById('mevAmount').value;
            const minAmountOut = document.getElementById('mevMinAmountOut').value;
            const slippageBps = parseInt(document.getElementById('mevSlippageBps').value);
            const userNonce = parseInt(document.getElementById('userNonce').value);

            // Fixed fee of 0.1% (10 bps)
            const FIXED_FEE_BPS = 10;

            // Generate private salt (in production, this should be done client-side)
            const privateSalt = `0x${crypto.getRandomValues(new Uint8Array(32)).map(b => b.toString(16).padStart(2, '0')).join('')}`;
            currentPrivateSalt = privateSalt;

            const swapDetails = {
                tokenIn,
                tokenOut,
                amountIn: amount,
                minAmountOut,
                deadline: Math.floor(Date.now() / 1000) + 3600,
                feeBps: FIXED_FEE_BPS,
                slippageBps
            };

            try {
                showStatus('Creating secure commitment...', 'info');

                const response = await fetch(`${API_BASE}/mev/commit`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        userAddress,
                        swapDetails,
                        userPrivateSalt: privateSalt,
                        userNonce
                    })
                });

                const result = await response.json();

                if (response.ok) {
                    currentCommitment = result.commitment;
                    document.getElementById('mevCommitResult').style.display = 'block';
                    document.getElementById('mevCommitResult').textContent = JSON.stringify(result, null, 2);
                    showStatus('Secure commitment created! Swap details are hidden from front-runners.', 'success');
                } else {
                    showStatus('Failed to create commitment: ' + result.error, 'error');
                }

            } catch (error) {
                showStatus('Error creating commitment: ' + error.message, 'error');
            }
        }

        async function revealAndExecute() {
            if (!currentCommitment || !currentPrivateSalt) {
                showStatus('Please create a commitment first!', 'error');
                return;
            }

            try {
                showStatus('Revealing and executing swap...', 'info');

                const response = await fetch(`${API_BASE}/mev/reveal`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        commitment: currentCommitment,
                        userPrivateSalt: currentPrivateSalt
                    })
                });

                const result = await response.json();

                if (response.ok) {
                    document.getElementById('mevRevealResult').style.display = 'block';
                    document.getElementById('mevRevealResult').textContent = JSON.stringify(result, null, 2);
                    showStatus('Secure MEV swap executed successfully!', 'success');

                    // Clear current commitment
                    currentCommitment = null;
                    currentPrivateSalt = null;
                } else {
                    showStatus('Failed to reveal and execute: ' + result.error, 'error');
                }

            } catch (error) {
                showStatus('Error revealing and executing: ' + error.message, 'error');
            }
        }

        // Setup MEV slippage range display
        function setupMEVSlippageDisplay() {
            const mevSlippageRange = document.getElementById('mevSlippageBps');
            const mevSlippageDisplay = document.getElementById('mevSlippageDisplay');
            mevSlippageRange.addEventListener('input', function () {
                const value = this.value;
                mevSlippageDisplay.textContent = `${value} bps (${(value / 100).toFixed(2)}%)`;
            });
        }

        // Initialize MEV displays
        document.addEventListener('DOMContentLoaded', function () {
            setupMEVSlippageDisplay();
        });
    </script>
</body>

</html>